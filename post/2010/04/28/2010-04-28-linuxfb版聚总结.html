<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1, minimum-scale=1, maximum-scale=1">
        <meta name="keywords" content="linux,linuxfb,ocfs2,SSD,vfs,VPN,debug,filesystem,">
        <meta name="description" content="LinuxFB版聚总结">
        <link rel="stylesheet" href="/css/index.css">
        <link rel="stylesheet" href="/css/github.css">
        <title>LinuxFB版聚总结</title>
    </head>
    <body>
        <article class="container">
            <a class="index" href="/">我有分寸</a>
<ul class="menu">
    <li class="menu-item"><a href="/archive.html">归档</a></li>
    <li class="menu-item"><a href="/tag.html">标签</a></li>
    
</ul>

            <article class="main article">
                <h1 class="title">LinuxFB版聚总结</h1>
                <section class="info">
                    <span class="avatar" style="background-image: url(/assets/sq.png);"></span>
                    <a class="name" href="/about.me.html">gnawux</a>
                    <span class="date" data-time="1272470339">
                        <span class="from"></span>
                        
                    </span>
                    <span class="tags"><a class="tag" href="/tag/linux/index.html">linux</a><a class="tag" href="/tag/linuxfb/index.html">linuxfb</a><a class="tag" href="/tag/ocfs2/index.html">ocfs2</a><a class="tag" href="/tag/SSD/index.html">SSD</a><a class="tag" href="/tag/vfs/index.html">vfs</a><a class="tag" href="/tag/VPN/index.html">VPN</a><a class="tag" href="/tag/debug/index.html">debug</a><a class="tag" href="/tag/filesystem/index.html">filesystem</a></span>
                </section>
                <article class="content"><p>2010年4月25日，linuxfb（北邮真情流露Linux版）在老据点之一——北邮教三某实验室的会议室举行了一月一次的版聚。由于聪明的同学们都看了天气预报没来，追星的同学都因为Coly同学缺席没来，版聚史无前例的只有11人出席，不过，还是一如既往的深入、一如既往的愉快。在此感谢李东阳、彭涛和Casparant同学的分享。参加的同学在Google Wave里有记录，搜索“linuxfb with:public”就能找到了，这里不再赘述，仅仅提一下几位突出贡献同学：</p>

<ul>

<li>bergwolf，也就是彭涛同学，每次在自我介绍时都会一如既往地将戒指从无名指挪到中指，这次贡献了一个很时髦的话题，一会再介绍，希望下次再聚会的时候不再需要这么挪戒指了——呃，我不是说要他提前挪好哈，大家明白吧。</li>

<li>lidongyang，李东阳每次来都给我留下深刻印象，尤其这次，带来了第一个精彩话题，当然，一会还是会介绍到的。</li>

<li>上面两位同学各带来一位围观者，不同的是，含蓄的东阳不想让在他组实习的mm来，而bergwolf则邀请来一位师妹，不知道这两位可爱的mm是不是以后还会来参加啊，呵呵</li>

<li>jerry/文捷，还有saka，都是来参加版聚新同学，热烈欢迎他们，saka让我们想起了久违的LeoVirgo，啥时候能再聚聚啊</li>

<li>bunbun是版聚的老面孔了，搞技术的女孩，呵呵，redsand后继有人啊，话说如果redsand下次带宝宝来的话，我也带我家儿子来，哈哈。</li>

<li>gmoto，linuxfb五年版聚史中的第一偶像派的帅哥，这次也来了，可惜没有topic和众多的男女fans</li>

<li>hzmalgel，版聚的元老，这次也一如既往的拒绝承认有女朋友，一样的活跃，而且参与了中间的caspar的VPN环节，试用了cooler提供的VPN账号，当然，没成功</li>

<li>casparant，本次版聚的多面手，测试了投影仪，担任了摄影师，还在第二个话题中介绍了多种翻墙技巧。</li>

</ul>

<p>李东阳这次介绍了一个ocfs2的一个bug，大概是这样的，fsstress的truncate会出错，内存中和磁盘上的元数据不一致，东阳同学在VFS的direct write位置定位了这个问题。背景是这样的：OCFS2的Direct Write不允许改变元数据，以获得更好的并发性能。但如果发现有O_DIRECT而不能directio，就送回VFS去做buffered io，可是，VFS的aio还是会检查 o_direct，回到 ocfs2_direct....，最后，该函数只查看 offset，不判断是否超出inode的范围，于是就出现了问题。最终的修改比较直接，就是要确定不要回到direct，只要确定进aio，就一定进aio，这样就不会出问题了。曲折的debug故事一直是我们比较喜欢的话题，非常有趣。</p>

<p>最后，bergwolf介绍了ATA的新指令TRIM，用于宣称某个块已经没有用了，可以被删除了，希望来帮助SSD更主动地垃圾回收，从而提升性能。2.6.33的内核已经支持了TRIM，btrfs和ext4也会使用TRIM。但是TRIM指令的设计师非常匪夷所思的，不能进入queue，类似barrier，这样，需要等前面的指令执行完才能执行TRIM，而TRIM完成之后才能有新的指令进入queue，一次的时延有上百毫秒，如果大量使用这个命令的话，反而会影响性能。结论是——这个命令暂时没啥好处……</p>

<p>总之，感谢讲话题的三位同学：lidongyang，bergwolf，casparant，也感谢永远的组织者，colyli和hzmangel，当然，我也会一如既往的记下去。</p>
</article>
                <section class="author">
                    <div class="avatar" style="background-image: url(/assets/sq.png);"></div>
                    <a class="name" href="/about.me.html">gnawux</a>
                    <div class="intro">me!#$!@#$@#$wangxu!@#$%^&amp;*()_me</div>
                </section>
                <section class="recommend">
                    
                    <section class="nav prev more">
                        <div class="head">上篇文章</div>
                        <a class="link" href="/post/2010/05/13/2010-05-13-[%e8%af%91%e6%96%87]%e7%90%86%e8%a7%a3cassandra%e6%ba%90%e4%bb%a3%e7%a0%81.html">[译文]理解Cassandra源代码</a>
                    </section>
                    
                    
                    <section class="nav next more">
                        <div class="head">下篇文章</div>
                        <a class="link" href="/post/2010/04/08/2010-04-08-codereview%e7%bb%9f%e8%ae%a1%e8%84%9a%e6%9c%ac.html">CodeReview统计脚本</a>
                    </section>
                    
                </section>
                <section id="disqus_thread"></section>
            </article>
        </article>
        <footer class="footer">
    <span class="copyright">
        我有分寸 ©
        <script type="text/javascript">
            document.write(new Date().getFullYear());
        </script>
    </span>
    <span class="publish">Powered by <a href="http://www.inkpaper.io/" target="_blank">Ink</a></span>
</footer>

        <script src="/js/jquery-1.11.2.min.js"></script>
        <script src="/js/highlight.pack.js"></script>
        <script src="/js/jquery.unveil.js"></script>
        <script src="/js/index.js"></script>
        <script type="text/javascript">
            (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//gnawux.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
            })();
        </script>
    </body>
</html>
