--- 
layout: post
meta: 
  _edit_last: "1"
  posturl_add_url: "yes"
published: true
status: publish
tags: 
  - VoIP
  - 电信网络
  - 移动网
  - 读后感
title: 给互联网圈子的朋友们介绍下运营商网络
type: post
---
<blockquote>按：事情从“微信收费”一说起来的，看到<a href="http://shell909090.com/blog/2013/04/%E4%BB%8E%E5%BE%AE%E4%BF%A1%E5%92%8C%E7%A7%BB%E5%8A%A8%E7%9A%84%E5%AE%98%E5%8F%B8%E8%AF%B4%E5%A4%9A%E7%BD%91%E8%9E%8D%E5%90%88/">Shell发了一篇blog</a>，深感电信和互联网两个领域互相不知根知底啊，作为前兼职3G讲师，来简单介绍一点吧。首先，这篇blog和微信一事的关系仅限于此段，我个人认为这纯粹是某公司的炒作，看了移动的<a href="http://blog.sina.com.cn/s/blog_7e63cdbb010189f9.html">宁宇的博客</a>，我更确信这一判断；其次，这篇文章不涉及所有运营商网络，运营商网络各有不同，我主要说说我更熟悉的移动网领域，尤其是 GSM/GPRS/EDGE/WCDMA（部分地包含TD），如果没有特殊说明，不包含固话网和CDMA/CDMA2000。嗯，这么说明严谨了吧，呵呵。

另外，其实从领域说，一般叫电信网，我怕大家和中国电信混了，所以改说运营商网络，下文凡是提到电信网，而不是中国电信的，泛指全球电信运营商的网络，而非中国电信。另外，全球电信运营商如一丘之貉，对比看，其实中国的也不过分，所以，骂的时候不必对比啊。</blockquote>
<h2>运营商网络是什么样的</h2>
从大面上说，电信网络分为三大部分：接入网、交换网和传送网。从大家的终端设备，到电信网络的交换机，这是接入网，选择目的地，进行电话交换的那个是交换网，长途传输的是传送网。从传输的内容看，还要分成数据平面和控制平面，控制信令（signaling）的传输一般是走专用的信令网的，比如著名的7号信令系统（SS7），以及为了在IP上承载信令网而搞的SCTP……

继续，传统地说，固话的接入网是从各位的家里一直到交换机的那根双绞线，这对线是独享的，电话56Kbps，DSL可以超过8Mbps，都是用的这一对线，除非别人盗用，否则这对线是你独享的，线路质量越好，你能达到的DSL速度也越高，当然，这是接入速度，端到端速度还有很多制约因素，这个大家都懂。

但无线网络有一点不同，没有电话线区分开大家，所以，大家是共享同一个“信号空间”的，这个空间由时间、频率、空间以及功率组成，毫无疑问，共享信道系统的资源总是很紧张。

历史上，让无线/移动通信第一次成为公众可以使用的服务，就来自于对空间的划分。无线信号总是会衰减的，而且衰减的很快，所以，把上述“信号空间”中的“空间”提取出来，将地面划分为很多蜂窝状的小块，相邻小区的其他信号空间要素不同，同样要素相邻一段再重新使用，互相的干扰会接近忽略，这样，就把资源的利用率极大提高了，于是，人人都可以用手机了。这也就是为什么移动网络又叫蜂窝网络了。顺便说一句，中国移动的LOGO就是一个蜂窝的形状，多数人应该看不出来，呵呵，反正中国移动员工知道这个的都不多，呵呵。

但是，划分小区不是没有代价的，系统需要知道你在哪个小区，才能和你通信，尤其有了终端耗电和节省信号空间的资源约束，移动网络的控制开销是比固定网络大的（包括网络结构上的开销和信令传输量的开销），小区越多，用户移动产生切换的概率就越高，随之而来的消耗就越高，所以1G-4G的在接入网演进的重点就在于频谱利用率的提高。各位可能觉得不移动就不需要有这些开销了，实际也是不准确的，网络需要知道用户的状态，来在有通信的时候找到用户，所以，即使是没有移动，也会在小时级的时间内（一般是2小时左右吧），进行周期性位置更新。所以，大家抠掉电池之后（神马？iPhone用户抠不掉？可以扔到水里啊），拨打它，首先是无法接通（或不在服务区），过一两个小时再播，就是“已关机”，因为它没有定时汇报。

微信带来的开销有可能和长时间连接带来的更多小区重选、位置更新有关，我不确定，但我认为核心问题是，网络是按照旧业务规划的，不适应新应用的新用法，移动希望双方合作，共同优化，这是一个合理的提议，收费的说法，我觉得炒作成分很大。
<h2>为什么会有电话网和数据网</h2>
Shell表示，他完全无法理解，在VoIP技术如此成熟的今天，为什么运营商还死抱着电路交换不放。实际上，简单地说，现在运营商的电话网全都是“软交换”（Soft switch）网络，就是一种VoIP技术，也靠这项技术节约了不少成本，大家电话资费的下降，和上面说的频谱利用率提高以及软交换的使用都密不可分，话说，要不是技术提高节约成本了，运营商会发善心，出让利润，给咱们省电话费么。不过，细说起来，电话网和数据网仍然不是一个网络，至少要到4G的核心网技术非常成熟的时候，才会逐渐统一起来。

在GSM的时代，用户的电话是占用一条专用链路的（电路交换称为CS），当然，电话本身就是双向实时传输的这不算浪费。但如果用来上网就比较浪费了，大家连上网，一般不会不停上传下载，占满线速，所以，虽然GSM电路交换体制下，有高速（其实也不快，跟3G差远了）数据的支持（HSCSD），但太浪费资源，不会有运营商采用的。运营商采用的方式是，小区基站那里不懂，叠加一张数据专用的交换网络让用户看起来一直在，但是只有在传送数据的时候裁占据资源，这个就是GPRS。因为GPRS是后加入的，GPRS和GSM 是几乎两张独立的网络，它们分别要管理各自用户的接入状态等，比如位置更新系统就有两套，因为GPRS同时有通信的用户远比电话网多，所以，为了控制信令规模，它的位置更新机制要更细一些，所以，网络的一直在线，比电话的一直在线开销高，这个不是扯淡，是真的。

这个CS/PS彼此独立，从GSM/GPRS开始，到3G仍是如此，EDGE只是提高了频谱利用率，3G（确切说是R4以后）进一步提高了频谱利用率，并在核心网引入了软交换，但一方面为了向前兼容，一方面为了在低资源消耗的情况下保障语音和视频电话网络的QoS，电路和是分组交换网一直是分离的，在未来4G的时代，趋势是两者统一，但短时间内，还是彼此独立的。

至于为什么IP电话还要加拨前缀，我得说，其实电话都是IP的，只是有些更IP一些—— 有质量保障上面的差异，当然也有纯营销手段在里面，大家都是做技术的，但技术和商品名之间的不同，应该还是可以理解的吧。
<h2>后记</h2>
嗯，不在电信网络圈子很多年了，这些东西不一定非常确切，也不算是中立立场，仅供互联网圈子的朋友们参考下吧。
