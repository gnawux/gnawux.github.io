date: 2008-05-14 08:08:08 +0800
update: ""
author: me
topic: ""
draft: false
top: false
title: 清除已删除软件包的配置文件的方法
date: 2008-05-14 20:13:00 +0800
categories:
- scripts
tags:
- APT
- debian
- scripts
- shell
- xargs
status: publish
type: post
published: true
---
<p>嗯，今天 (May 14th, 2006) 清理一下系统，使用了一个命令行，可能对其他人有参考价值</p>

<blockquote><p>dpkg -l |grep &quot;^rc&quot;|awk '{print $2}' |xargs aptitude -y purge</p>

</blockquote>

<p>用途:</p>

<p>删除已经删除的软件包的残留配置文件。因为 debian 中 remove 包不删除配置文件，purge 才能清除，但根据依赖关系自动清除都是 remove，在加上自己失手操作，所以用得时间长了，难免残留很多没必要的配置文件，比较烦，于是有了上述操作。</p>

<p>说明:</p>

<p>1) dpkg –l</p>

<p>列出系统中安装的所有包的状态，`ii' 开头的是正常安装的包，`rc'开头的则是删除但仍留下配置文件的包，其他状态则是有错误的状态，自己执行一次就明白了，输出结果的开头有说明的。</p>

<p>2) grep &quot;^rc&quot;</p>

<p>提取以 rc 开头的包，也就是被删除但仍残留配置文件的包的信息的行</p>

<p>3) awk '{print $2}'</p>

<p>打印这些包的名字，他们位于 dpkg -l 输出结果的第二个字段，估计有很多人是通过这个命令认识到 awk 的，也有很多人只在这个命令行中才使用 awk，我就是其中之一。</p>

<p>4) xargs aptitude -y purge</p>

<p>把上述输出，也就是要清除配置文件的包的名字放在 aptitude -y purge 后面，purge 命令会清除配置文件，而 -y 参数会自动对后面 aptitude 命令的提示回答是，这个开关通常是危险的，所以在一般情况下不要轻易使用，而在这里，如果你确定这些包的配置文的清除是没有问题的的话，可以使用这个开关。</p>

<p>完毕 :)</p>
